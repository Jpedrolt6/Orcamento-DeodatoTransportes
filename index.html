<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <title>Or√ßamento Transportadora</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="wrap">
    <header class="hero glass">
      <div class="brand">
        <div class="logo">üì¶</div>
        <div class="title">
          <h1>Deodato Transportes</h1>
          <p>Or√ßamento r√°pido com endere√ßos do Google</p>
        </div>
      </div>
    </header>

    <main class="grid">
      <section class="card glass">
        <h2>Endere√ßos</h2>

        <div class="field">
          <label for="origem">Retirada</label>
          <input id="origem" type="text" placeholder="Digite o endere√ßo de retirada" autocomplete="off" />
        </div>

        <div id="paradas"></div>

        <button class="ghost" id="btnAddParada" type="button">+ Adicionar parada</button>

        <div class="field">
          <label for="destino">Entrega</label>
          <input id="destino" type="text" placeholder="Digite o endere√ßo de entrega" autocomplete="off" />
        </div>

        <div class="row">
          <div class="field small">
            <label for="servico">Servi√ßo</label>
            <select id="servico">
              <option value="moto">Motoboy</option>
              <option value="carro">Carro</option>
              <option value="fiorino">Fiorino / Picapes</option>
              <option value="hr_ducato">HR / Ducato</option>
              <option value="iveco_master">Iveco / Master</option>
            </select>
          </div>

          <!-- come√ßa escondido; o JS mostra quando "Motoboy" est√° selecionado -->
          <div class="field small" id="motoTipoRow" style="display:none">
            <label for="motoTipo">Tipo (moto)</label>
            <select id="motoTipo">
              <option value="" selected disabled>Selecione‚Ä¶</option>
              <option value="bau">Ba√∫</option>
              <option value="food">FOOD (mochila termica)</option>
            </select>
          </div>
        </div>

        <!-- ================= CUPOM DE DESCONTO (AGORA AQUI, ENTRE SERVI√áO/TIPO E CALCULAR) ================ -->
        <div class="cupom-box">
          <label for="couponInput">Cupom de desconto</label>
          <div class="cupom-row">
            <input id="couponInput" type="text" placeholder="Digite seu cupom" autocomplete="off" />
            <button id="applyCouponBtn" type="button">Aplicar</button>
          </div>
          <small id="couponMsg"></small>
        </div>

        <!-- Estilo r√°pido do campo de cupom -->
        <style>
          .cupom-box{margin-top:12px}
          .cupom-row{display:flex;gap:8px}
          #couponMsg{display:block;margin-top:6px;opacity:.9}
        </style>
        <!-- ================================================================================================ -->

        <div class="actions">
          <button class="primary" id="btnCalcular" type="button">Calcular</button>
          <!-- Bot√£o do Whats foi movido para o Resumo -->
        </div>
      </section>

      <aside class="card glass">
        <h2>Resumo</h2>
        <div id="resumo" class="resumo">
          <!-- DIST√ÇNCIA -->
          <div class="metric">
            <span class="lbl">Dist√¢ncia</span>
            <span class="val" id="mDist">‚Äî</span>
          </div>

          <!-- CUPOM (entre Dist√¢ncia e Valor) -->
          <div id="resumoCupomCard" class="resumo-pill" style="display:none;">
            <span>Cupom</span>
            <strong id="resumoCupomValue">-</strong>
          </div>

          <!-- estilo do pill -->
          <style>
            .resumo-pill{
              background: rgba(255,255,255,0.06);
              border-radius: 12px;
              padding: 10px 14px;
              display: flex; justify-content: space-between; align-items: center;
              margin: 8px 0;
            }
            #resumoCupomCard strong{ font-weight: 700; }
          </style>

          <!-- VALOR -->
          <div class="metric">
            <span class="lbl">Valor</span>
            <span class="val" id="mValor">‚Äî</span>
          </div>

          <div class="rules">
            <h3>Regras do servi√ßo</h3>
            <ul>
              <li>Ba√∫ m√°x.: 44 √ó 42 √ó 32 cm</li>
              <li>Peso m√°x.: 20 kg</li>
              <li>Espera: R$ 0,60/min ap√≥s 15 min</li>
            </ul>
          </div>

          <!-- Aparece s√≥ ap√≥s c√°lculo OK -->
          <a class="cta wa hide" id="btnWhats" href="#" target="_blank" rel="noopener">Enviar Or√ßamento no WhatsApp</a>

          <button class="outline" id="btnLimpar" type="button">Limpar tudo</button>
        </div>
      </aside>
    </main>

    <footer class="foot">
      <p>¬© Deodato Transportes ‚Äî S√£o Paulo ‚Ä¢ Brasil</p>
    </footer>
  </div>

  <!-- 1) Carrega seu app primeiro -->
  <script src="app.js?v=9" defer></script>

  <!-- 2) Depois o Maps, que chama initOrcamento; for√ßa referer s√≥ com origem -->
  <script
    async defer
    referrerpolicy="origin"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAhGvrR_Gp4e0ROB1BInjNBSUQdHEh6ews&libraries=places&v=weekly&callback=initOrcamento">
  </script>
</body>
</html>
